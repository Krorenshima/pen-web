(function(){let a;a=function(b,c={}){return this instanceof a?b instanceof a?b:void(this.el=b,a.start(this)):new a(...arguments)},a.cc=b=>b.replace(/[_\- ](\w)/g,(c,d)=>d.toUpperCase()),a.slice=b=>[].slice.call(b),a.type=function(){let b={},c=['Boolean','Number','String','Function','Array','Date','RegExp','Undefined','Null','Error','Symbol','Promise','NamedNodeMap','Map','NodeList','DOMTokenList','DOMStringMap','CSSStyleDeclaration'];for(let d=0,e=c.length;d<e;d++)b[`[object ${c[d]}]`]=c[d].toLowerCase();return d=>b[{}.toString.call(d)]||'object'}(),a.empty=b=>{switch(a.type(b)){case'array':case'string':return 0===b.length;case'object':if(null!=Object.keys)return 0===Object.keys(b).length&&b.constructor===Object;for(let c in b)if(b.hasOwnProperty(c))return!1;return JSON.stringify(b)===JSON.stringify({});break;case'regexp':return 0===b.source.length;}},a.random=b=>b[Math.floor(Math.random()*b.length)],a.check=(b,c)=>'string'===a.type(b)?new RegExp(b,c||'gi'):b,a.parse=b=>{let c={},d=b.match(/([^\n ]*?)=(['"]([^\n'"]*?)['"]|(true|false))/gi);if(null==d||a.empty(d))return null;for(let g,e=0,f=d.length;e<f;e++)g=d[e],g.includes('=')&&(c[g.substr(0,g.search(/=/))]=g.substr(g.search(/=/)+1).replace(/["']/g,''));return a.empty(c)?null:c},a.fracture=(b,c,d,e)=>{let g,h,f=a.type(b.el[c]);for(h in d)g=null==e?h:`${e}-${h}`,'object'===a.type(d[h])?a.fracture(b,c,d[h],g):'function'===f?b.el[c](g,d[h]):[g]=d[h];return b},a.parseEl=b=>{let c,d,e,f;return c=b.substr(b.search(/</),b.search(/>/)+1),d=c.substr(c.search(/</)+1,c.search(c.match(/<([^\n ]+)>/)?/>/:/ /)-1),e=c.substr(c.search(/ /)+1,c.search(/>/)),f=b.substr(c.length,b.search(/<\//)),[`<${d}`===e?null:e,d,f==c?null:a.empty(f)?null:f]},a.handoff=(b,c=!1)=>c?a(b):b,a.$=(b,c)=>'string'===a.type(b)?a.handoff(document.querySelector(b),c):b,a.$$=b=>document.querySelectorAll(b),a.create=(b,c)=>a.handoff(document.createElement(b),c),a.all=(b,c,...d)=>{for(let e=0,f=b.length;e<f;e++)b[e][c](...d)},a.display=(b,c)=>{let d=a.$(b,!0);d.text=d.text.replace(/-([^\n]*?)-/g,(e,f)=>c[f])},a.start=b=>{if('string'===a.type(b.el))if(b.el.startsWith('<')){let[c,d,e]=a.parseEl(b.el);if(b.el=a.create(d),null!=c){let f=a.parse(c);null!=f&&b.attr(f)}null!=e&&0!==e.length&&b.html(e,{parse:!0})}else b.el=a.$(b.el);if(null!=b.el){switch(b.el='template'===b.tag?b.el.content:b.el,b.cusOps={},!0){case b.el instanceof Document:a.prototype.ready=function(){return b.on('DOMContentLoaded',...arguments),b};break;case b.el instanceof Window:b.doc=b.el.document;break;case'template'===b.tag:a.prototype.clone=function(){return document.importNode(...arguments),b};break;case'canvas'===b.tag:b.ctx=b.context=b.el.getContext('2d');}return this}},a.fn=a.prototype={constructor:a,toString(){return this.el.outerHTML},get tag(){return(this.el.tagName||'UNPARSED-OR-IOS-ELEMENT').toLowerCase()},get text(){return this.html()},set text(b){return this.html(b)},get children(){let b=a.slice(this.el.children);for(let c=0,d=b.length;c<d;c++)b[c]=a(b[c]);return b},set children(b){return this.append(...b),this},get parent(){return this.el.parentNode||null},set parent(b){return this.appendTo(b)},get classes(){return a.slice(this.el.classList)},set classes(b){return this.toggle(b)},get attrs(){let b={},c=a.slice(this.el.attributes);for(let d=0,e=c.length;d<e;d++)b[c[d].name]=c[d].value;return b},set attrs(b){return this.attr(b)},get selector(){let d,b=this.attrs,c='',e=null==this.attr('id')?'':`#${this.attr('id')}`,f=null==this.attr('class')?'':`.${this.classes.join('.')}`;for(d in b)/class|id|style/i.test(d)||(c+=`[${d}="${b[d]}"]`);return`${this.tag}${e}${f}${a.empty(c)?'':c}`},get size(){return this.el.getBoundingClientRect()},get hidden(){return'none'===this.css('display')},get ops(){return{parseIt:this.cusOps.parseIt||!1,app:this.cusOps.app||!1,parse:this.cusOps.parse||!1}},set ops(b){return this.cusOps={parseIt:null!=b&&(b.parseIt||!1),app:null!=b&&(b.app||!1),parse:null!=b&&(b.parse||!1)},this.cusOps},html(b,c){if(null!=b){let{parse:d,app:e}=this.ops=null==c?{}:c,f=d?'innerHTML':'innerText',g=/textarea/i.test(this.tag)?'innerText':f;switch(this.tag){case'input':this.el.value=e?this.el.value+b:b;break;case'option':this.el.value=e?this.el.value+b:b,this.el.innerText=e?this.el.value+b:b;break;default:this.el[g]=e?this.el[g]+b:b;}return this}switch(this.tag){case'input':case'option':case'textarea':return this.el.value;break;default:return this.el.innerText;}},attr(b,c){if(null!=b)switch(!0){case'object'===a.type(b):return a.fracture(this,'setAttribute',b);case null!=c:return this.el.setAttribute(b,c),this;default:return this.el.getAttribute(b);}else return this.attrs},css(b,c){if(null!=b)switch(!0){case'object'===a.type(b):return a.fracture(this,'style',b);case null!=c:return this.el.style[a.cc(b)]=c,this;default:return this.el.style[b];}else return this.el.style},on(b,c,d,e){return d=d||!1,this.el.events=this.el.events||{},this.el.addEventListener(b,c,d),this.el.events[b]={capture:d},this.el.events[b][null==e?c.name||'func':e]=c,this},off(b,c,d){return this.el.removeEventListener(b,null==d?c:this.el.events[b][d]),delete this.el.events[b][null==d?c.name||'func':d],this},append(...b){if(a.empty(b))throw new Error(`No elements passed`);for(let e,c=0,d=b.length;c<d;c++)e=a.$(b[c]),this.el.appendChild(e instanceof a?e.el:e);return this},appendTo(b){return a(b).append(this),this},remove(){if(null!=this.parent)this.parent.removeChild(this.el);else throw new Error(`Couldn't remove ${this}`);return this},$(b){return a.handoff(this.el.querySelector(b),this.ops.parseIt)},$$(b){return this.el.querySelectorAll(b)},create(b,c){return b=a(b),this.append(b),'parent'===c?this:'child'===c?b:this},toggle(...b){for(let c=0,d=b.length;c<d;c++)this.el.classList.toggle(b[c]);return this},hasClass(b){for(let c=0,d=this.classes.length;c<d;c++)if(this.classes[c]===b)return!0;return!1}},window.pen=a,window.pDoc=a(document),window.pWin=a(window),document.body?(window.body=document.body,window.head=document.head,window.pHead=a(head),window.pBody=a(body)):document.addEventListener('DOMContentLoaded',()=>{window.body=document.body,window.head=document.head,window.pHead=a(head),window.pBody=a(body)},{once:!0})}).call(this);
